<div class="suggestion-container">

  <h1>ğŸ“ Liste des Suggestions</h1>

  <div class="search-section">
    <div class="search-box">
      <span class="search-icon">ğŸ”</span>
      <input
        type="text"
        placeholder="Rechercher par titre ou catÃ©gorie..."
        [(ngModel)]="searchText">
    </div>
  </div>

  <div *ngIf="filteredSuggestions.length === 0" class="no-results">
    <p>ğŸ˜• Aucune suggestion trouvÃ©e</p>
  </div>

  <div class="suggestions-grid">
    <div *ngFor="let s of filteredSuggestions" class="suggestion-card">

      <span class="status-badge"
            [ngClass]="{
              'status-acceptee': s.status === 'acceptee',
              'status-refusee': s.status === 'refusee',
              'status-en_attente': s.status === 'en_attente'
            }">
        {{ s.status === 'acceptee' ? 'âœ… AcceptÃ©e' :
           s.status === 'refusee' ? 'âŒ RefusÃ©e' :
           'â³ En attente' }}
      </span>

      <h3>{{ s.title }}</h3>
      <p>{{ s.description }}</p>

      <div class="suggestion-meta">
        <span class="category-badge">{{ s.category }}</span>
      </div>

      <div class="suggestion-meta">
        <strong>ğŸ‘¤ Auteur:</strong> {{ s.author }}<br>
        <strong>ğŸ“… Date:</strong> {{ s.date | date:'dd/MM/yyyy' }}<br>
        <span class="likes-count">ğŸ’™ {{ s.nbLikes }} likes</span>
      </div>

      <div class="suggestion-actions">
        <button
          class="btn-like"
          *ngIf="!isRefused(s)"
          (click)="like(s)"
          title="Liker cette suggestion">
          ğŸ‘ Like
        </button>

        <button
          class="btn-favorite"
          *ngIf="!isRefused(s)"
          (click)="addToFavorites(s)"
          title="Ajouter aux favoris">
          â­ Favoris
        </button>

        <button class="btn-remove-favorite"
                *ngIf="isRefused(s)"
                disabled
                title="Cette suggestion a Ã©tÃ© refusÃ©e">
          âŒ RefusÃ©e
        </button>
      </div>

    </div>
  </div>

  <div class="refused-count" *ngIf="refusedCount > 0">
    âŒ Nombre de suggestions refusÃ©es: {{ refusedCount }}
  </div>

  <div class="favorites-section" *ngIf="favorites.length > 0">
    <h2>â­ Mes Favoris ({{ favorites.length }})</h2>

    <ul class="favorites-list">
      <li *ngFor="let f of favorites">
        <div>
          <strong>{{ f.title }}</strong>
          <small class="category-badge" style="margin-left: 0.5rem;">{{ f.category }}</small>
        </div>
        <button class="btn-remove-favorite" (click)="removeFavorite(f)">
          ğŸ—‘ï¸ Retirer
        </button>
      </li>
    </ul>
  </div>

  <div *ngIf="favorites.length === 0" class="no-results">
    <p>ğŸ’« Ajoutez des suggestions Ã  vos favoris!</p>
  </div>

</div>
